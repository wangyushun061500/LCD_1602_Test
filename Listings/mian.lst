C51 COMPILER V9.59.0.0   MIAN                                                              08/15/2020 21:59:06 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MIAN
OBJECT MODULE PLACED IN .\Objects\mian.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE mian.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\mian
                    -.lst) TABS(2) OBJECT(.\Objects\mian.obj)

line level    source

   1          #include "config.h"
   2          
   3          
   4          //函数提前声明
   5          void init (void);
   6          void Delay100us();
   7          u8 LCD_Data_Read (void);
   8          void LCD_Data_Write (u8 Data);
   9          void Write_Cmd(u8 cmd);
  10          void Write_Dat(u8 dat);
  11          
  12          void main (void)
  13          {
  14   1          init();
  15   1          while (1)
  16   1          {
  17   2              
  18   2          }
  19   1          
  20   1      }
  21          
  22          //初始化函数
  23          void init (void)
  24          {
  25   1          P0M0 = 0x03;
  26   1          P0M1 = 0x00;
  27   1          P1M0 = 0xe0;
  28   1          P1M1 = 0x00;
  29   1          VSS = 1;
  30   1          GND = 0;
  31   1          LEDA = 1;
  32   1          LEDK = 0;
  33   1      }
  34          
  35          //延时函数100us
  36          void Delay100us()   //@24.000MHz
  37          {
  38   1        unsigned char i, j;
  39   1      
  40   1        i = 3;
  41   1        j = 82;
  42   1        do
  43   1        {
  44   2          while (--j);
  45   2        } while (--i);
  46   1      }
  47          
  48          //读数据
  49          u8 LCD_Data_Read (void)
  50          {
  51   1           u8 Data;
  52   1           Data = (P0 >> 2) | (P1 << 6);
  53   1           Data = (Data << 4) | (Data >> 4);
  54   1           Data = ((Data >> 2) & 0x33) | ((Data << 2) & 0xcc);
C51 COMPILER V9.59.0.0   MIAN                                                              08/15/2020 21:59:06 PAGE 2   

  55   1           Data = ((Data >> 1) & 0x55) | ((Data << 1) & 0xaa);
  56   1           return Data;
  57   1      }
  58          
  59          //写数据
  60          void LCD_Data_Write (u8 Data)
  61          {
  62   1          D0 = (bit)(Data & 0x01);
  63   1          D1 = (bit)(Data & 0x02);
  64   1          D2 = (bit)(Data & 0x04);
  65   1          D3 = (bit)(Data & 0x08);
  66   1          D4 = (bit)(Data & 0x10);
  67   1          D5 = (bit)(Data & 0x12);
  68   1          D6 = (bit)(Data & 0x14);
  69   1          D7 = (bit)(Data & 0x18);
  70   1      }
  71          
  72          //写命令操作
  73          void Write_Cmd(u8 cmd)
  74          {
  75   1        RS = 0;                     //写入命令
  76   1        RW = 0;
  77   1        LCD_Data_Write(cmd);      
  78   1          Delay100us();
  79   1        CE = 1;                     //使能端高电平
  80   1        Delay100us();
  81   1        CE = 0;
  82   1      }
  83           
  84          //写数据操作
  85          void Write_Dat(u8 dat)
  86          {
  87   1        RS = 1;
  88   1        RW = 0;
  89   1        LCD_Data_Write(dat);
  90   1        Delay100us();
  91   1        CE = 1;                 //使能端高电平
  92   1        Delay100us();
  93   1        CE = 0;
  94   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    155    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
